{"version":3,"file":"js/449.f01f85fb.js","mappings":"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","sources":["webpack://frontend/./node_modules/@ant-design/icons-svg/es/asn/ReloadOutlined.js","webpack://frontend/./node_modules/@ant-design/icons-vue/es/icons/ReloadOutlined.js","webpack://frontend/./src/views/admin/AdminPrompt.vue","webpack://frontend/./src/views/admin/AdminPrompt.vue?8abd"],"sourcesContent":["// This icon file is generated automatically.\nvar ReloadOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z\" } }] }, \"name\": \"reload\", \"theme\": \"outlined\" };\nexport default ReloadOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport ReloadOutlinedSvg from \"@ant-design/icons-svg/es/asn/ReloadOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar ReloadOutlined = function ReloadOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": ReloadOutlinedSvg\n  }), null);\n};\n\nReloadOutlined.displayName = 'ReloadOutlined';\nReloadOutlined.inheritAttrs = false;\nexport default ReloadOutlined;","<template>\n  <div class=\"admin-prompt\">\n    <h1>提示词管理</h1>\n    \n    <!-- 搜索和筛选 -->\n    <div class=\"filter-section\">\n      <a-row :gutter=\"16\">\n        <a-col :span=\"8\">\n          <a-input-search\n            v-model:value=\"searchKeyword\"\n            placeholder=\"搜索提示词标题\"\n            enter-button\n            @search=\"handleSearch\"\n          />\n        </a-col>\n        <a-col :span=\"8\">\n          <a-select\n            v-model:value=\"selectedTags\"\n            mode=\"multiple\"\n            placeholder=\"选择标签筛选\"\n            style=\"width: 100%\"\n            :options=\"tagOptions\"\n            @change=\"handleTagChange\"\n          />\n        </a-col>\n        <a-col :span=\"4\">\n          <a-select\n            v-model:value=\"status\"\n            style=\"width: 100%\"\n            @change=\"handleStatusChange\"\n          >\n            <a-select-option :value=\"-1\">全部状态</a-select-option>\n            <a-select-option :value=\"1\">正常</a-select-option>\n            <a-select-option :value=\"0\">已删除</a-select-option>\n          </a-select>\n        </a-col>\n        <a-col :span=\"4\">\n          <a-button type=\"primary\" @click=\"handleRefresh\">\n            <template #icon><reload-outlined /></template>\n            刷新\n          </a-button>\n        </a-col>\n      </a-row>\n    </div>\n    \n    <!-- 提示词列表 -->\n    <a-table\n      :columns=\"columns\"\n      :data-source=\"prompts\"\n      :loading=\"loading\"\n      :pagination=\"pagination\"\n      @change=\"handleTableChange\"\n      row-key=\"id\"\n    >\n      <!-- 标题列 -->\n      <template #bodyCell=\"{ column, record }\">\n        <template v-if=\"column.key === 'title'\">\n          <router-link :to=\"`/prompt/detail/${record.id}`\" target=\"_blank\">\n            {{ record.title }}\n          </router-link>\n        </template>\n        \n        <!-- 标签列 -->\n        <template v-if=\"column.key === 'tags'\">\n          <a-tag v-for=\"tag in record.tags\" :key=\"tag.id\" color=\"blue\">\n            {{ tag.name }}\n          </a-tag>\n        </template>\n        \n        <!-- 用户列 -->\n        <template v-if=\"column.key === 'user'\">\n          <div class=\"user-info\">\n            <a-avatar :src=\"record.userAvatar || '/avatar-default.png'\" size=\"small\" />\n            <span>{{ record.username }}</span>\n          </div>\n        </template>\n        \n        <!-- 状态列 -->\n        <template v-if=\"column.key === 'status'\">\n          <a-tag :color=\"record.status === 1 ? 'green' : 'red'\">\n            {{ record.status === 1 ? '正常' : '已删除' }}\n          </a-tag>\n        </template>\n        \n        <!-- 操作列 -->\n        <template v-if=\"column.key === 'action'\">\n          <div class=\"action-buttons\">\n            <a-button type=\"link\" size=\"small\" @click=\"handleEdit(record)\">\n              编辑\n            </a-button>\n            <a-button \n              v-if=\"record.status === 1\" \n              type=\"link\" \n              size=\"small\" \n              danger \n              @click=\"handleDelete(record)\"\n            >\n              删除\n            </a-button>\n            <a-button \n              v-else \n              type=\"link\" \n              size=\"small\" \n              @click=\"handleRestore(record)\"\n            >\n              恢复\n            </a-button>\n          </div>\n        </template>\n      </template>\n    </a-table>\n    \n    <!-- 编辑提示词弹窗 -->\n    <a-modal\n      v-model:visible=\"editModalVisible\"\n      title=\"编辑提示词\"\n      @ok=\"submitEdit\"\n      :confirmLoading=\"submitLoading\"\n      width=\"800px\"\n    >\n      <a-form\n        :model=\"editForm\"\n        layout=\"vertical\"\n      >\n        <a-form-item label=\"标题\" name=\"title\" :rules=\"[{ required: true, message: '请输入标题' }]\">\n          <a-input v-model:value=\"editForm.title\" />\n        </a-form-item>\n        \n        <a-form-item label=\"提示词内容\" name=\"content\" :rules=\"[{ required: true, message: '请输入提示词内容' }]\">\n          <a-textarea v-model:value=\"editForm.content\" :rows=\"6\" />\n        </a-form-item>\n        \n        <a-form-item label=\"标签\" name=\"tagIds\" :rules=\"[{ required: true, type: 'array', message: '请选择标签' }]\">\n          <a-select\n            v-model:value=\"editForm.tagIds\"\n            mode=\"multiple\"\n            placeholder=\"选择标签\"\n            :options=\"tagOptions\"\n          />\n        </a-form-item>\n      </a-form>\n    </a-modal>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted } from 'vue'\nimport { message } from 'ant-design-vue'\nimport { ReloadOutlined } from '@ant-design/icons-vue'\nimport api from '../../api'\n\n// 表格列定义\nconst columns = [\n  {\n    title: 'ID',\n    dataIndex: 'id',\n    key: 'id',\n    width: 80\n  },\n  {\n    title: '标题',\n    dataIndex: 'title',\n    key: 'title'\n  },\n  {\n    title: '标签',\n    key: 'tags'\n  },\n  {\n    title: '发布者',\n    key: 'user'\n  },\n  {\n    title: '点赞数',\n    dataIndex: 'likeCount',\n    key: 'likeCount',\n    width: 100\n  },\n  {\n    title: '收藏数',\n    dataIndex: 'favoriteCount',\n    key: 'favoriteCount',\n    width: 100\n  },\n  {\n    title: '状态',\n    key: 'status',\n    width: 100\n  },\n  {\n    title: '创建时间',\n    dataIndex: 'createTime',\n    key: 'createTime',\n    width: 180\n  },\n  {\n    title: '操作',\n    key: 'action',\n    width: 150\n  }\n]\n\n// 状态变量\nconst loading = ref(false)\nconst prompts = ref([])\nconst tagOptions = ref([])\nconst searchKeyword = ref('')\nconst selectedTags = ref([])\nconst status = ref(-1)\nconst pagination = reactive({\n  current: 1,\n  pageSize: 10,\n  total: 0,\n  showSizeChanger: true,\n  showQuickJumper: true\n})\n\n// 编辑相关\nconst editModalVisible = ref(false)\nconst submitLoading = ref(false)\nconst editForm = reactive({\n  id: null,\n  title: '',\n  content: '',\n  tagIds: []\n})\n\n// 获取标签列表\nconst fetchTags = async () => {\n  try {\n    const res = await api.tag.getTagList()\n    if (res.code === 200) {\n      tagOptions.value = res.data.map(tag => ({\n        label: tag.name,\n        value: tag.id\n      }))\n    }\n  } catch (error) {\n    console.error('获取标签列表失败', error)\n  }\n}\n\n// 获取提示词列表\nconst fetchPrompts = async () => {\n  loading.value = true\n  try {\n    const res = await api.admin.getPromptList({\n      current: pagination.current,\n      size: pagination.pageSize,\n      keyword: searchKeyword.value || undefined,\n      tagIds: selectedTags.value.length > 0 ? selectedTags.value : undefined,\n      status: status.value >= 0 ? status.value : undefined\n    })\n    if (res.code === 200) {\n      prompts.value = res.data.records\n      pagination.total = res.data.total\n    }\n  } catch (error) {\n    console.error('获取提示词列表失败', error)\n    message.error('获取提示词列表失败')\n  } finally {\n    loading.value = false\n  }\n}\n\n// 搜索\nconst handleSearch = () => {\n  pagination.current = 1\n  fetchPrompts()\n}\n\n// 标签筛选\nconst handleTagChange = () => {\n  pagination.current = 1\n  fetchPrompts()\n}\n\n// 状态筛选\nconst handleStatusChange = () => {\n  pagination.current = 1\n  fetchPrompts()\n}\n\n// 刷新\nconst handleRefresh = () => {\n  fetchPrompts()\n}\n\n// 表格变化（分页、排序等）\nconst handleTableChange = (pag) => {\n  pagination.current = pag.current\n  pagination.pageSize = pag.pageSize\n  fetchPrompts()\n}\n\n// 编辑提示词\nconst handleEdit = (record) => {\n  editForm.id = record.id\n  editForm.title = record.title\n  editForm.content = record.content\n  editForm.tagIds = record.tags.map(tag => tag.id)\n  editModalVisible.value = true\n}\n\n// 提交编辑\nconst submitEdit = async () => {\n  if (!editForm.title || !editForm.content || editForm.tagIds.length === 0) {\n    message.warning('请填写完整信息')\n    return\n  }\n  \n  submitLoading.value = true\n  try {\n    const res = await api.prompt.updatePrompt({\n      id: editForm.id,\n      title: editForm.title,\n      content: editForm.content,\n      tagIds: editForm.tagIds\n    })\n    if (res.code === 200) {\n      message.success('更新成功')\n      editModalVisible.value = false\n      fetchPrompts()\n    } else {\n      message.error(res.message || '更新失败')\n    }\n  } catch (error) {\n    message.error('更新失败，请稍后重试')\n  } finally {\n    submitLoading.value = false\n  }\n}\n\n// 删除提示词\nconst handleDelete = async (record) => {\n  try {\n    const res = await api.prompt.deletePrompt(record.id)\n    if (res.code === 200) {\n      message.success('删除成功')\n      fetchPrompts()\n    } else {\n      message.error(res.message || '删除失败')\n    }\n  } catch (error) {\n    message.error('删除失败，请稍后重试')\n  }\n}\n\n// 恢复提示词\nconst handleRestore = async (record) => {\n  try {\n    const res = await api.admin.restorePrompt(record.id)\n    if (res.code === 200) {\n      message.success('恢复成功')\n      fetchPrompts()\n    } else {\n      message.error(res.message || '恢复失败')\n    }\n  } catch (error) {\n    message.error('恢复失败，请稍后重试')\n  }\n}\n\nonMounted(() => {\n  fetchTags()\n  fetchPrompts()\n})\n</script>\n\n<style scoped>\n.admin-prompt {\n  padding: 0 0 20px 0;\n}\n\n.filter-section {\n  margin-bottom: 20px;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.action-buttons {\n  display: flex;\n}\n</style>\n","import script from \"./AdminPrompt.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AdminPrompt.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AdminPrompt.vue?vue&type=style&index=0&id=ce303478&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ce303478\"]])\n\nexport default __exports__"],"names":["ReloadOutlined","_objectSpread","target","i","arguments","length","source","Object","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","value","defineProperty","configurable","writable","props","context","p","attrs","_createVNode","AntdIcon","ReloadOutlinedSvg","displayName","inheritAttrs","columns","title","dataIndex","width","loading","ref","prompts","tagOptions","searchKeyword","selectedTags","status","pagination","reactive","current","pageSize","total","showSizeChanger","showQuickJumper","editModalVisible","submitLoading","editForm","id","content","tagIds","fetchTags","async","res","api","tag","getTagList","code","data","map","label","name","error","console","fetchPrompts","admin","getPromptList","size","keyword","undefined","records","message","handleSearch","handleTagChange","handleStatusChange","handleRefresh","handleTableChange","pag","handleEdit","record","tags","submitEdit","prompt","updatePrompt","success","warning","handleDelete","deletePrompt","handleRestore","restorePrompt","onMounted","__exports__"],"sourceRoot":""}