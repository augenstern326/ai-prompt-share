"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[462],{3462:function(e,a,r){r.r(a),r.d(a,{default:function(){return h}});var l=r(6768),s=r(4232);const o={class:"login-page"},n={class:"container"},i={class:"login-card"},u={class:"login-header"},t={class:"login-footer"},d={key:0},m={key:1};function g(e,a,r,g,c,f){const p=(0,l.g2)("a-input"),v=(0,l.g2)("a-form-item"),b=(0,l.g2)("a-input-password"),k=(0,l.g2)("a-button"),w=(0,l.g2)("a-form"),h=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.Lk)("div",n,[(0,l.Lk)("div",i,[(0,l.Lk)("div",u,[(0,l.Lk)("h2",null,(0,s.v_)(g.isLogin?"登录":"注册"),1),(0,l.Lk)("p",null,(0,s.v_)(g.isLogin?"欢迎回来，请登录您的账号":"创建一个新账号，开始分享AI提示词"),1)]),(0,l.bF)(w,{model:g.formData,rules:g.rules,onFinish:g.handleSubmit,layout:"vertical"},{default:(0,l.k6)((()=>[(0,l.bF)(v,{label:"用户名",name:"username"},{default:(0,l.k6)((()=>[(0,l.bF)(p,{value:g.formData.username,"onUpdate:value":a[0]||(a[0]=e=>g.formData.username=e),placeholder:"请输入用户名"},null,8,["value"])])),_:1}),g.isLogin?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(v,{key:0,label:"邮箱",name:"email"},{default:(0,l.k6)((()=>[(0,l.bF)(p,{value:g.formData.email,"onUpdate:value":a[1]||(a[1]=e=>g.formData.email=e),placeholder:"请输入邮箱"},null,8,["value"])])),_:1})),(0,l.bF)(v,{label:"密码",name:"password"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{value:g.formData.password,"onUpdate:value":a[2]||(a[2]=e=>g.formData.password=e),placeholder:"请输入密码"},null,8,["value"])])),_:1}),g.isLogin?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(v,{key:1,label:"确认密码",name:"confirmPassword"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{value:g.formData.confirmPassword,"onUpdate:value":a[3]||(a[3]=e=>g.formData.confirmPassword=e),placeholder:"请再次输入密码"},null,8,["value"])])),_:1})),(0,l.bF)(v,null,{default:(0,l.k6)((()=>[(0,l.bF)(k,{type:"primary","html-type":"submit",loading:g.loading,block:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(g.isLogin?"登录":"注册"),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules","onFinish"]),(0,l.Lk)("div",t,[g.isLogin?((0,l.uX)(),(0,l.CE)("p",d,[a[5]||(a[5]=(0,l.eW)(" 还没有账号？ ")),(0,l.bF)(h,{to:"/register"},{default:(0,l.k6)((()=>a[4]||(a[4]=[(0,l.eW)("立即注册")]))),_:1})])):((0,l.uX)(),(0,l.CE)("p",m,[a[7]||(a[7]=(0,l.eW)(" 已有账号？ ")),(0,l.bF)(h,{to:"/login"},{default:(0,l.k6)((()=>a[6]||(a[6]=[(0,l.eW)("立即登录")]))),_:1})]))])])])])}r(4114);var c=r(144),f=r(1387),p=r(4783),v=r(7694),b={name:"LoginPage",setup(){const e=(0,f.lq)(),a=(0,f.rd)(),r=(0,p.k)(),s=(0,c.KR)(!1),o=(0,l.EW)((()=>"/login"===e.path)),n=(0,c.Kh)({username:"",email:"",password:"",confirmPassword:""}),i=(0,l.EW)((()=>{const e={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度必须在3-20个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度必须在6-20个字符之间",trigger:"blur"}]};return o.value?e:{...e,email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(e,a)=>a===n.password?Promise.resolve():Promise.reject(new Error("两次输入的密码不一致")),trigger:"blur"}]}})),u=async()=>{s.value=!0;try{let l;if(l=o.value?await r.login({username:n.username,password:n.password}):await r.register({username:n.username,email:n.email,password:n.password}),l){const r=e.query.redirect||"/";a.push(r)}}catch(l){v.Ay.error("操作失败，请稍后重试")}finally{s.value=!1}};return{isLogin:o,formData:n,rules:i,loading:s,handleSubmit:u}}},k=r(1241);const w=(0,k.A)(b,[["render",g],["__scopeId","data-v-7728eca2"]]);var h=w}}]);
//# sourceMappingURL=462.e122fd2d.js.map