{"version":3,"file":"js/105.81e442aa.js","mappings":"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","sources":["webpack://frontend/./src/views/prompt/PromptEdit.vue","webpack://frontend/./src/views/prompt/PromptEdit.vue?c08a","webpack://frontend/./node_modules/@ant-design/icons-svg/es/asn/UploadOutlined.js","webpack://frontend/./node_modules/@ant-design/icons-vue/es/icons/UploadOutlined.js"],"sourcesContent":["<template>\n  <div class=\"prompt-edit\">\n    <a-card title=\"编辑提示词\">\n      <a-form :model=\"formState\" :rules=\"rules\" ref=\"formRef\" layout=\"vertical\">\n        <a-form-item label=\"标题\" name=\"title\">\n          <a-input v-model:value=\"formState.title\" placeholder=\"请输入提示词标题\" />\n        </a-form-item>\n        \n        <a-form-item label=\"内容\" name=\"content\">\n          <a-textarea \n            v-model:value=\"formState.content\" \n            placeholder=\"请输入提示词内容\" \n            :auto-size=\"{ minRows: 5, maxRows: 15 }\" \n          />\n        </a-form-item>\n        \n        <a-form-item label=\"标签\" name=\"tagIds\">\n          <a-select\n            v-model:value=\"formState.tagIds\"\n            mode=\"multiple\"\n            placeholder=\"请选择标签\"\n            style=\"width: 100%\"\n          >\n            <a-select-option v-for=\"tag in tagList\" :key=\"tag.id\" :value=\"tag.id\">\n              {{ tag.name }}\n            </a-select-option>\n          </a-select>\n        </a-form-item>\n        \n        <a-form-item label=\"效果图\" name=\"imageUrl\">\n          <a-upload\n            v-model:file-list=\"fileList\"\n            list-type=\"picture-card\"\n            :before-upload=\"beforeUpload\"\n            @change=\"handleChange\"\n          >\n            <div v-if=\"fileList.length < 1\">\n              <upload-outlined />\n              <div style=\"margin-top: 8px\">上传</div>\n            </div>\n          </a-upload>\n        </a-form-item>\n        \n        <a-form-item>\n          <a-button type=\"primary\" @click=\"onSubmit\">保存</a-button>\n          <a-button style=\"margin-left: 10px\" @click=\"onCancel\">取消</a-button>\n        </a-form-item>\n      </a-form>\n    </a-card>\n  </div>\n</template>\n\n<script>\nimport { ref, reactive, onMounted } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nimport { message } from 'ant-design-vue';\nimport { UploadOutlined } from '@ant-design/icons-vue';\nimport { getPromptDetail, updatePrompt } from '@/api';\nimport { getTagList } from '@/api';\nimport { uploadFile } from '@/api';\n\nexport default {\n  name: 'PromptEditPage',\n  components: {\n    UploadOutlined\n  },\n  setup() {\n    const router = useRouter();\n    const route = useRoute();\n    const formRef = ref();\n    const tagList = ref([]);\n    const fileList = ref([]);\n    \n    const formState = reactive({\n      id: null,\n      title: '',\n      content: '',\n      tagIds: [],\n      imageUrl: ''\n    });\n    \n    const rules = {\n      title: [{ required: true, message: '请输入标题', trigger: 'blur' }],\n      content: [{ required: true, message: '请输入内容', trigger: 'blur' }],\n      tagIds: [{ required: true, message: '请选择至少一个标签', type: 'array' }]\n    };\n    \n    onMounted(async () => {\n      try {\n        // 获取标签列表\n        const res = await getTagList();\n        tagList.value = res.data.list;\n        \n        // 获取提示词详情\n        const promptId = route.params.id;\n        if (promptId) {\n          const promptRes = await getPromptDetail(promptId);\n          const promptData = promptRes.data;\n          \n          formState.id = promptData.id;\n          formState.title = promptData.title;\n          formState.content = promptData.content;\n          formState.tagIds = promptData.tags.map(tag => tag.id);\n          formState.imageUrl = promptData.imageUrl;\n          \n          if (promptData.imageUrl) {\n            fileList.value = [\n              {\n                uid: '-1',\n                name: 'image.png',\n                status: 'done',\n                url: promptData.imageUrl\n              }\n            ];\n          }\n        }\n      } catch (error) {\n        message.error('获取数据失败');\n      }\n    });\n    \n    const beforeUpload = (file) => {\n      const isImage = file.type.startsWith('image/');\n      if (!isImage) {\n        message.error('只能上传图片文件!');\n      }\n      const isLt2M = file.size / 1024 / 1024 < 2;\n      if (!isLt2M) {\n        message.error('图片必须小于2MB!');\n      }\n      return false;\n    };\n    \n    const handleChange = async (info) => {\n      if (info.file.status !== 'uploading') {\n        const formData = new FormData();\n        formData.append('file', info.file.originFileObj);\n        formData.append('directory', 'prompt');\n        \n        try {\n          const res = await uploadFile(info.file.originFileObj, 'prompt');\n          formState.imageUrl = res.data.objectName;\n          message.success('上传成功');\n        } catch (error) {\n          message.error('上传失败');\n        }\n      }\n    };\n    \n    const onSubmit = () => {\n      formRef.value\n        .validate()\n        .then(async () => {\n          try {\n            await updatePrompt(formState);\n            message.success('保存成功');\n            router.push('/prompt/detail/' + formState.id);\n          } catch (error) {\n            message.error('保存失败');\n          }\n        })\n        .catch(error => {\n          console.log('验证失败', error);\n        });\n    };\n    \n    const onCancel = () => {\n      router.back();\n    };\n    \n    return {\n      formRef,\n      formState,\n      rules,\n      tagList,\n      fileList,\n      beforeUpload,\n      handleChange,\n      onSubmit,\n      onCancel\n    };\n  }\n};\n</script>\n\n<style scoped>\n.prompt-edit {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n}\n</style>\n","import { render } from \"./PromptEdit.vue?vue&type=template&id=5a9dfaaa&scoped=true\"\nimport script from \"./PromptEdit.vue?vue&type=script&lang=js\"\nexport * from \"./PromptEdit.vue?vue&type=script&lang=js\"\n\nimport \"./PromptEdit.vue?vue&type=style&index=0&id=5a9dfaaa&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5a9dfaaa\"]])\n\nexport default __exports__","// This icon file is generated automatically.\nvar UploadOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"upload\", \"theme\": \"outlined\" };\nexport default UploadOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport UploadOutlinedSvg from \"@ant-design/icons-svg/es/asn/UploadOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar UploadOutlined = function UploadOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": UploadOutlinedSvg\n  }), null);\n};\n\nUploadOutlined.displayName = 'UploadOutlined';\nUploadOutlined.inheritAttrs = false;\nexport default UploadOutlined;"],"names":["class","key","_createElementBlock","_hoisted_1","_createVNode","_component_a_card","title","default","_withCtx","_component_a_form","model","$setup","formState","rules","ref","layout","_component_a_form_item","label","name","_component_a_input","value","_cache","$event","placeholder","_","_component_a_textarea","content","minRows","maxRows","_component_a_select","tagIds","mode","style","_Fragment","_renderList","tagList","tag","_createBlock","_component_a_select_option","id","_createTextVNode","_toDisplayString","_component_a_upload","fileList","beforeUpload","onChange","handleChange","length","_hoisted_2","_component_upload_outlined","_createElementVNode","_createCommentVNode","_component_a_button","type","onClick","onSubmit","onCancel","components","UploadOutlined","setup","router","useRouter","route","useRoute","formRef","reactive","imageUrl","required","message","trigger","onMounted","async","res","getTagList","data","list","promptId","params","promptRes","getPromptDetail","promptData","tags","map","uid","status","url","error","file","isImage","startsWith","isLt2M","size","info","formData","FormData","append","originFileObj","uploadFile","objectName","success","validate","then","updatePrompt","push","catch","console","log","back","__exports__","render","_objectSpread","target","i","arguments","source","Object","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","_defineProperty","obj","defineProperty","configurable","writable","props","context","p","attrs","AntdIcon","UploadOutlinedSvg","displayName","inheritAttrs"],"sourceRoot":""}