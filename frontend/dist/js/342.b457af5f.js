"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[342],{7342:function(a,e,l){l.r(e),l.d(e,{default:function(){return W}});l(4114),l(8111),l(1701);var t=l(6768),u=l(4232),s=l(144),r=l(1387),n=l(3397);const o={class:"prompt-square"},v={class:"container"},p={class:"filter-section"},i={class:"search-box"},c={class:"tag-filter"},d={class:"sort-filter"},k={class:"prompt-list"},g={class:"prompt-cards"},m={class:"prompt-card"},L={class:"prompt-card-image"},f=["src","alt"],h={class:"prompt-card-content"},b={class:"prompt-card-title"},y={class:"prompt-card-tags"},F={class:"prompt-card-footer"},_={class:"prompt-card-stats"},C={class:"prompt-card-user"},w={class:"pagination"};var K={__name:"PromptSquare",setup(a){const e=(0,r.lq)(),l=(0,r.rd)(),K=(0,s.KR)(!1),R=(0,s.KR)([]),q=(0,s.KR)(0),W=(0,s.KR)(1),X=(0,s.KR)(12),E=(0,s.KR)(""),I=(0,s.KR)([]),U=(0,s.KR)([]),z=(0,s.KR)(0),S=async()=>{try{const a=await n["default"].tag.getTagList();200===a.code&&(U.value=a.data.map((a=>({label:a.name,value:a.id}))))}catch(a){console.error("获取标签列表失败",a)}},j=async()=>{K.value=!0;try{const a=await n["default"].prompt.getPromptList({current:W.value,size:X.value,keyword:E.value,tagIds:I.value.length>0?I.value:void 0,sortType:z.value});200===a.code&&(R.value=a.data.records,q.value=a.data.total)}catch(a){console.error("获取提示词列表失败",a)}finally{K.value=!1}},A=()=>{W.value=1,j()},N=()=>{W.value=1,j()},x=()=>{W.value=1,j()},P=a=>{W.value=a,j()},T=()=>{const{keyword:a,tags:l,sort:t,page:u}=e.query;a&&(E.value=a),l&&(I.value=l.split(",").map((a=>Number(a)))),void 0!==t&&(z.value=Number(t)),u&&(W.value=Number(u))},B=()=>{const a={};E.value&&(a.keyword=E.value),I.value.length>0&&(a.tags=I.value.join(",")),0!==z.value&&(a.sort=z.value),1!==W.value&&(a.page=W.value),l.push({query:a})};return(0,t.wB)([E,I,z,W],(()=>{B()})),(0,t.sV)((()=>{T(),S(),j()})),(a,e)=>{const l=(0,t.g2)("a-input-search"),s=(0,t.g2)("a-select"),r=(0,t.g2)("a-select-option"),n=(0,t.g2)("a-icon"),S=(0,t.g2)("a-avatar"),j=(0,t.g2)("router-link"),T=(0,t.g2)("a-pagination"),B=(0,t.g2)("a-empty"),V=(0,t.g2)("a-spin");return(0,t.uX)(),(0,t.CE)("div",o,[(0,t.Lk)("div",v,[e[7]||(e[7]=(0,t.Lk)("div",{class:"prompt-square-header"},[(0,t.Lk)("h1",null,"提示词广场"),(0,t.Lk)("p",null,"发现和探索高质量的AI提示词")],-1)),(0,t.Lk)("div",p,[(0,t.Lk)("div",i,[(0,t.bF)(l,{value:E.value,"onUpdate:value":e[0]||(e[0]=a=>E.value=a),placeholder:"搜索提示词","enter-button":"",onSearch:A},null,8,["value"])]),(0,t.Lk)("div",c,[(0,t.bF)(s,{value:I.value,"onUpdate:value":e[1]||(e[1]=a=>I.value=a),mode:"multiple",placeholder:"选择标签筛选",style:{width:"100%"},options:U.value,onChange:N},null,8,["value","options"])]),(0,t.Lk)("div",d,[(0,t.bF)(s,{value:z.value,"onUpdate:value":e[2]||(e[2]=a=>z.value=a),style:{width:"120px"},onChange:x},{default:(0,t.k6)((()=>[(0,t.bF)(r,{value:0},{default:(0,t.k6)((()=>e[4]||(e[4]=[(0,t.eW)("最新")]))),_:1}),(0,t.bF)(r,{value:1},{default:(0,t.k6)((()=>e[5]||(e[5]=[(0,t.eW)("热门")]))),_:1}),(0,t.bF)(r,{value:2},{default:(0,t.k6)((()=>e[6]||(e[6]=[(0,t.eW)("收藏")]))),_:1})])),_:1},8,["value"])])]),(0,t.Lk)("div",k,[(0,t.bF)(V,{spinning:K.value},{default:(0,t.k6)((()=>[R.value.length>0?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.Lk)("div",g,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(R.value,(a=>((0,t.uX)(),(0,t.CE)("div",{key:a.id,class:"prompt-card-wrapper"},[(0,t.bF)(j,{to:`/prompt/detail/${a.id}`},{default:(0,t.k6)((()=>[(0,t.Lk)("div",m,[(0,t.Lk)("div",L,[(0,t.Lk)("img",{src:a.imageUrl||"/default-prompt.jpg",alt:a.title},null,8,f)]),(0,t.Lk)("div",h,[(0,t.Lk)("h3",b,(0,u.v_)(a.title),1),(0,t.Lk)("div",y,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.tags.slice(0,3),(a=>((0,t.uX)(),(0,t.CE)("span",{key:a.id,class:"tag"},(0,u.v_)(a.name),1)))),128))]),(0,t.Lk)("div",F,[(0,t.Lk)("div",_,[(0,t.Lk)("span",null,[(0,t.bF)(n,{type:"like"}),(0,t.eW)(" "+(0,u.v_)(a.likeCount),1)]),(0,t.Lk)("span",null,[(0,t.bF)(n,{type:"dislike"}),(0,t.eW)(" "+(0,u.v_)(a.dislikeCount),1)]),(0,t.Lk)("span",null,[(0,t.bF)(n,{type:"star"}),(0,t.eW)(" "+(0,u.v_)(a.favoriteCount),1)])]),(0,t.Lk)("div",C,[(0,t.bF)(S,{src:a.userAvatar||"/avatar-default.png",size:"small"},null,8,["src"]),(0,t.Lk)("span",null,(0,u.v_)(a.username),1)])])])])])),_:2},1032,["to"])])))),128))]),(0,t.Lk)("div",w,[(0,t.bF)(T,{current:W.value,"onUpdate:current":e[3]||(e[3]=a=>W.value=a),total:q.value,pageSize:X.value,"show-quick-jumper":"",onChange:P},null,8,["current","total","pageSize"])])],64)):((0,t.uX)(),(0,t.Wv)(B,{key:1,description:"暂无数据"}))])),_:1},8,["spinning"])])])])}}},R=l(1241);const q=(0,R.A)(K,[["__scopeId","data-v-85acf01c"]]);var W=q}}]);
//# sourceMappingURL=342.b457af5f.js.map