"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[124],{7124:function(a,e,t){t.r(e),t.d(e,{default:function(){return X}});t(8111),t(2489);var r=t(6768),l=t(4232),s=t(144),n=t(7694),i=t(3397);const c={class:"user-favorite"},u={class:"container"},o={class:"favorite-list"},p={class:"prompt-cards"},d={class:"prompt-card"},v={class:"prompt-card-image"},k=["src","alt"],g={class:"prompt-card-content"},m={class:"prompt-card-title"},L={class:"prompt-card-tags"},f={class:"prompt-card-footer"},y={class:"prompt-card-stats"},C={class:"prompt-card-user"},F={class:"card-actions"},_={class:"pagination"};var b={__name:"UserFavorite",setup(a){const e=(0,s.KR)(!1),t=(0,s.KR)([]),b=(0,s.KR)(0),h=(0,s.KR)(1),K=(0,s.KR)(12),X=async()=>{e.value=!0;try{const a=await i["default"].prompt.getFavoriteList({current:h.value,size:K.value});200===a.code&&(t.value=a.data.records,b.value=a.data.total)}catch(a){console.error("获取收藏列表失败",a),n.Ay.error("获取收藏列表失败")}finally{e.value=!1}},w=async a=>{try{const e=await i["default"].prompt.cancelFavorite(a);200===e.code?(n.Ay.success("已取消收藏"),t.value=t.value.filter((e=>e.id!==a)),b.value--):n.Ay.error("操作失败")}catch(e){n.Ay.error("操作失败，请稍后重试")}},A=a=>{h.value=a,X()};return(0,r.sV)((()=>{X()})),(a,s)=>{const n=(0,r.g2)("a-icon"),i=(0,r.g2)("a-avatar"),X=(0,r.g2)("router-link"),E=(0,r.g2)("a-button"),R=(0,r.g2)("a-pagination"),W=(0,r.g2)("a-empty"),z=(0,r.g2)("a-spin");return(0,r.uX)(),(0,r.CE)("div",c,[(0,r.Lk)("div",u,[s[2]||(s[2]=(0,r.Lk)("div",{class:"user-favorite-header"},[(0,r.Lk)("h1",null,"我的收藏"),(0,r.Lk)("p",null,"您收藏的所有提示词")],-1)),(0,r.Lk)("div",o,[(0,r.bF)(z,{spinning:e.value},{default:(0,r.k6)((()=>[t.value.length>0?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},[(0,r.Lk)("div",p,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(t.value,(a=>((0,r.uX)(),(0,r.CE)("div",{key:a.id,class:"prompt-card-wrapper"},[(0,r.bF)(X,{to:`/prompt/detail/${a.id}`},{default:(0,r.k6)((()=>[(0,r.Lk)("div",d,[(0,r.Lk)("div",v,[(0,r.Lk)("img",{src:a.imageUrl||"/default-prompt.jpg",alt:a.title},null,8,k)]),(0,r.Lk)("div",g,[(0,r.Lk)("h3",m,(0,l.v_)(a.title),1),(0,r.Lk)("div",L,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.tags.slice(0,3),(a=>((0,r.uX)(),(0,r.CE)("span",{key:a.id,class:"tag"},(0,l.v_)(a.name),1)))),128))]),(0,r.Lk)("div",f,[(0,r.Lk)("div",y,[(0,r.Lk)("span",null,[(0,r.bF)(n,{type:"like"}),(0,r.eW)(" "+(0,l.v_)(a.likeCount),1)]),(0,r.Lk)("span",null,[(0,r.bF)(n,{type:"dislike"}),(0,r.eW)(" "+(0,l.v_)(a.dislikeCount),1)]),(0,r.Lk)("span",null,[(0,r.bF)(n,{type:"star"}),(0,r.eW)(" "+(0,l.v_)(a.favoriteCount),1)])]),(0,r.Lk)("div",C,[(0,r.bF)(i,{src:a.userAvatar||"/avatar-default.png",size:"small"},null,8,["src"]),(0,r.Lk)("span",null,(0,l.v_)(a.username),1)])])])])])),_:2},1032,["to"]),(0,r.Lk)("div",F,[(0,r.bF)(E,{type:"primary",onClick:e=>w(a.id)},{default:(0,r.k6)((()=>s[1]||(s[1]=[(0,r.eW)(" 取消收藏 ")]))),_:2},1032,["onClick"])])])))),128))]),(0,r.Lk)("div",_,[(0,r.bF)(R,{current:h.value,"onUpdate:current":s[0]||(s[0]=a=>h.value=a),total:b.value,pageSize:K.value,"show-quick-jumper":"",onChange:A},null,8,["current","total","pageSize"])])],64)):((0,r.uX)(),(0,r.Wv)(W,{key:1,description:"暂无收藏的提示词"}))])),_:1},8,["spinning"])])])])}}},h=t(1241);const K=(0,h.A)(b,[["__scopeId","data-v-45d660be"]]);var X=K}}]);
//# sourceMappingURL=124.3f30c7eb.js.map